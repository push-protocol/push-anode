generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Block {
  block_hash String  @id @map("block_hash") @db.Text
  data       Bytes   @db.ByteA
  ts         Int    @default(0) @map("ts")

  @@index([block_hash], name: "blocks_idx")
}

model Transaction {
  ts           Int    @default(0) @map("ts")
  block_hash   String   @db.VarChar(128)
  category     String   @db.VarChar(32)
  source       String   @db.VarChar(64)
  recipients   Json?    @db.JsonB
  data         String   @db.Text
  data_as_json Json?    @db.JsonB
  sig          String   @db.Text

  @@id([sig])
  @@index([block_hash], name: "transaction_block_hash_idx")
}
